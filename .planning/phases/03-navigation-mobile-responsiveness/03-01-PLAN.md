---
phase: 03-navigation-mobile-responsiveness
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - css/main.css
  - index.html
  - philosophy.html
  - faq.html
  - contact.html
  - testimonials.html
  - exhibits/exhibit-a.html
  - exhibits/exhibit-b.html
  - exhibits/exhibit-c.html
  - exhibits/exhibit-d.html
  - exhibits/exhibit-e.html
  - exhibits/exhibit-f.html
  - exhibits/exhibit-g.html
  - exhibits/exhibit-h.html
  - exhibits/exhibit-i.html
autonomous: true

must_haves:
  truths:
    - "All 14 pages have identical navigation links: Home, Philosophy, FAQ, Contact, Field Reports"
    - "All navigation links use absolute-from-root paths (/page.html) that work from any directory depth"
    - "Logo paths use absolute-from-root format (/assets/images/...) on all pages"
    - "Hamburger button markup exists on all 14 pages (hidden on desktop via CSS)"
    - "Mobile viewport (<768px) displays hamburger button instead of horizontal nav"
    - "Mobile menu slides in from right with smooth CSS transform animation"
  artifacts:
    - path: "css/main.css"
      provides: "Hamburger button styles, mobile slide-in menu styles, touch target sizing"
      contains: ".hamburger"
    - path: "index.html"
      provides: "Canonical navigation structure with hamburger button"
      contains: "aria-controls"
  key_links:
    - from: "all 14 HTML pages"
      to: "/page.html"
      via: "absolute-from-root href attributes"
      pattern: 'href="/[a-z]'
    - from: ".hamburger button"
      to: "#nav-menu"
      via: "aria-controls attribute"
      pattern: 'aria-controls="nav-menu"'
---

<objective>
Standardize navigation HTML across all 14 pages with absolute-from-root paths, add identical nav links (Home, Philosophy, FAQ, Contact, Field Reports), insert hamburger button markup, and add mobile-responsive CSS for the hamburger menu.

Purpose: Establish consistent, accessible navigation structure that works from any directory depth and provides mobile-friendly hamburger menu layout.
Output: All 14 pages with identical nav HTML + hamburger CSS in main.css. Menu visually functional but JS toggle not yet wired.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-navigation-mobile-responsiveness/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add hamburger menu and mobile navigation CSS to main.css</name>
  <files>css/main.css</files>
  <action>
Add the following CSS sections to css/main.css. Insert hamburger button styles after the existing theme toggle section (after line ~240). Add mobile menu styles to the existing @media (max-width: 768px) block.

**Desktop styles (add after theme toggle section):**

1. `.hamburger` button: `display: none` on desktop. Style with `padding: 12px`, `background: transparent`, `border: none`, `cursor: pointer`, `color: var(--color-inverse-text)`.

2. `.hamburger-box`: `width: 28px`, `height: 24px`, `display: inline-block`, `position: relative`.

3. `.hamburger-inner` and its `::before`/`::after` pseudo-elements: `width: 28px`, `height: 3px`, `background-color: currentColor`, `border-radius: 2px`, `position: absolute`, `transition: transform 0.3s ease, opacity 0.3s ease`. `::before` at `top: -8px`, `::after` at `bottom: -8px`.

4. `.hamburger.is-active .hamburger-inner`: `transform: rotate(45deg)`. `::before`: `transform: rotate(-90deg); top: 0`. `::after`: `opacity: 0`.

5. `.nav-menu` class: Add to existing `nav ul` styles -- add `.nav-menu` as an alias/replacement class name. Keep existing `display: flex; list-style: none; gap: var(--space-xl)`.

**Mobile styles (inside @media max-width: 768px):**

Replace existing `nav ul { gap: var(--space-md); }` with comprehensive mobile nav:

1. `.hamburger`: `display: block; z-index: 101`.

2. `.nav-menu` (was `nav ul`): `position: fixed; top: 72px; right: 0; width: 280px; height: calc(100vh - 72px); background: var(--color-inverse); flex-direction: column; gap: 0; padding: var(--space-lg) 0; transform: translate3d(100%, 0, 0); transition: transform 0.3s ease-in-out; visibility: hidden; box-shadow: -2px 0 8px rgba(0,0,0,0.3); overflow-y: auto; z-index: 100`.

3. `.nav-menu.is-open`: `transform: translate3d(0, 0, 0); visibility: visible`.

4. `.nav-menu li`: `border-bottom: 1px solid var(--color-border)` (add --color-border token if not present, fallback to `rgba(255,255,255,0.1)`).

5. `.nav-menu a`: `display: block; padding: 14px 20px; min-height: 48px; line-height: 20px` for 48px touch targets.

6. `.nav-menu .theme-toggle`: `margin: var(--space-md) 20px; min-height: 48px` for touch target compliance in mobile menu.

**Important:** Do NOT use `role="menu"` anywhere. Use the class name `.nav-menu` on the `<ul>` element (semantic HTML, not ARIA menu). Ensure the `--color-border` token exists in `:root` (check first, add if missing -- use `rgba(255,255,255,0.15)` for dark nav context or a suitable existing token).
  </action>
  <verify>
Verify with grep:
- `grep -c "hamburger" css/main.css` returns 10+ matches (styles for button, box, inner, active states)
- `grep -c "nav-menu" css/main.css` returns 5+ matches (desktop + mobile styles)
- `grep "translate3d" css/main.css` returns mobile transform rule
- `grep "min-height: 48px" css/main.css` returns touch target rules
- No `role="menu"` anywhere in CSS comments
  </verify>
  <done>
css/main.css contains: hamburger button styles (hidden on desktop), hamburger icon animation (3-line to X), mobile slide-in menu with GPU-accelerated transform, 48px touch targets, and visibility toggle class.
  </done>
</task>

<task type="auto">
  <name>Task 2: Standardize navigation HTML across all 14 pages</name>
  <files>
    index.html
    philosophy.html
    faq.html
    contact.html
    testimonials.html
    exhibits/exhibit-a.html
    exhibits/exhibit-b.html
    exhibits/exhibit-c.html
    exhibits/exhibit-d.html
    exhibits/exhibit-e.html
    exhibits/exhibit-f.html
    exhibits/exhibit-g.html
    exhibits/exhibit-h.html
    exhibits/exhibit-i.html
  </files>
  <action>
Replace the `<nav>` block on all 14 pages with the following canonical navigation HTML. The ONLY variation per page is the `aria-current="page"` attribute on the current page's link.

**Canonical nav HTML (use this exact structure):**

```html
<!-- Navigation -->
<nav>
    <div class="container">
        <a href="/index.html" class="logo-link">
            <img src="/assets/images/logos/pattern158_logo_3pipes_detailed.png"
                 alt="Pattern 158 - Provider of Clarity"
                 class="logo-img"
                 height="48">
        </a>

        <!-- Hamburger button (mobile only) -->
        <button class="hamburger"
                type="button"
                aria-expanded="false"
                aria-controls="nav-menu"
                aria-label="Toggle navigation menu">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
        </button>

        <!-- Navigation menu -->
        <ul id="nav-menu" class="nav-menu">
            <li><a href="/index.html">Home</a></li>
            <li><a href="/philosophy.html">Philosophy</a></li>
            <li><a href="/faq.html">FAQ</a></li>
            <li><a href="/contact.html">Contact</a></li>
            <li><a href="/testimonials.html">Field Reports</a></li>
            <li>
                <button id="theme-toggle" class="theme-toggle" type="button"
                        aria-label="Toggle dark mode" aria-pressed="false">
                    <svg class="icon-sun" aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                    <svg class="icon-moon" aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                    <span class="sr-only">Toggle dark mode</span>
                </button>
            </li>
        </ul>
    </div>
</nav>
```

**Per-page variation -- add `aria-current="page"` to the active page's link:**
- index.html: `<a href="/index.html" aria-current="page">Home</a>`
- philosophy.html: `<a href="/philosophy.html" aria-current="page">Philosophy</a>`
- faq.html: `<a href="/faq.html" aria-current="page">FAQ</a>`
- contact.html: `<a href="/contact.html" aria-current="page">Contact</a>`
- testimonials.html: `<a href="/testimonials.html" aria-current="page">Field Reports</a>`
- All 9 exhibits: `<a href="/testimonials.html">Field Reports</a>` (no aria-current -- parent page is closest)

**Key changes from current state:**
1. ALL paths become absolute-from-root (`/index.html` not `index.html` or `../index.html`)
2. Logo `src` becomes `/assets/images/logos/...` (not relative)
3. Nav links standardized: Home, Philosophy, FAQ, Contact, Field Reports (removes "Work" and "About" anchor links -- these were index.html section anchors, not standalone pages)
4. Hamburger `<button>` added between logo and `<ul>`
5. `<ul>` gets `id="nav-menu"` and `class="nav-menu"`
6. "Field Reports" link added to philosophy, faq, contact (was missing)
7. "FAQ" link added to testimonials and exhibits (was missing)
8. Exhibits no longer use `../` relative paths

**CRITICAL:** Do NOT remove the existing theme toggle button -- it stays as the last `<li>` in the nav menu. Do NOT add `role="menu"` to the `<ul>`. Keep existing `<body>` classes, skip links, and everything else outside `<nav>` untouched.
  </action>
  <verify>
Run these checks across all 14 HTML files:
- `grep -r 'href="\.\./' *.html exhibits/*.html` returns ZERO matches (no relative paths)
- `grep -r 'href="index\.html' *.html exhibits/*.html` returns ZERO matches (no bare relative paths -- all should have leading /)
- `grep -r 'href="/testimonials.html"' *.html exhibits/*.html` returns 14 matches (all pages link to Field Reports)
- `grep -r 'href="/philosophy.html"' *.html exhibits/*.html` returns 14 matches
- `grep -r 'href="/faq.html"' *.html exhibits/*.html` returns 14 matches
- `grep -r 'href="/contact.html"' *.html exhibits/*.html` returns 14 matches
- `grep -r 'aria-controls="nav-menu"' *.html exhibits/*.html` returns 14 matches (hamburger on all pages)
- `grep -r 'id="nav-menu"' *.html exhibits/*.html` returns 14 matches
- `grep -r 'role="menu"' *.html exhibits/*.html` returns ZERO matches
  </verify>
  <done>
All 14 pages have identical navigation structure with: absolute-from-root paths for all links and logo, consistent link set (Home, Philosophy, FAQ, Contact, Field Reports), hamburger button markup, nav-menu id/class on ul, and theme toggle preserved. No relative paths remain in navigation.
  </done>
</task>

</tasks>

<verification>
1. All 14 pages have identical `<nav>` structure (diff nav blocks)
2. Zero `../` relative paths in any navigation href
3. Zero bare filename hrefs (all start with `/`)
4. All pages include: Home, Philosophy, FAQ, Contact, Field Reports links
5. Hamburger button exists on all pages with aria-expanded, aria-controls, aria-label
6. CSS includes hamburger styles (hidden on desktop, visible on mobile)
7. Mobile menu positioned fixed with transform-based slide animation
8. Touch targets >= 48px in mobile menu
9. No `role="menu"` anywhere in codebase
10. Theme toggle preserved in nav on all pages
</verification>

<success_criteria>
- Navigation HTML is identical across all 14 pages (only aria-current varies)
- All hrefs use absolute-from-root paths (/page.html format)
- Hamburger button markup present on all pages
- css/main.css has complete hamburger + mobile menu styles
- Desktop view shows horizontal nav with hamburger hidden
- Mobile view (< 768px) shows hamburger button with nav hidden
</success_criteria>

<output>
After completion, create `.planning/phases/03-navigation-mobile-responsiveness/03-01-SUMMARY.md`
</output>
