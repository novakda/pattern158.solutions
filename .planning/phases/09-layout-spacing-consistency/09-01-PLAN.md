---
phase: 09-layout-spacing-consistency
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - css/main.css
autonomous: true
requirements:
  - LAYOUT-01
  - LAYOUT-04

must_haves:
  truths:
    - "Zero hardcoded pixel/rem margin, padding, or gap values remain in css/main.css except structural exceptions (nav dimensions, border widths, positioning offsets)"
    - "All sections across all 17 pages use consistent vertical spacing from design tokens"
    - "Section spacing creates intentional visual rhythm with breathing room between content blocks"
  artifacts:
    - path: "css/main.css"
      provides: "Complete spacing token coverage and consistent section rhythm"
      contains: "var(--space-"
  key_links:
    - from: "css/main.css :root"
      to: "css/main.css selectors"
      via: "var(--space-*) references"
      pattern: "var\\(--space-"
---

<objective>
Migrate all remaining hardcoded spacing values to design tokens and establish consistent section spacing rhythm across the entire stylesheet.

Purpose: LAYOUT-01 requires zero raw pixel/rem values for margins/padding. LAYOUT-04 requires intentional visual rhythm. This plan achieves both by completing the spacing token migration started in Phase 7 and normalizing section-level spacing patterns for a balanced, professional feel (GitHub/Linear density per user decision).

Output: css/main.css with 100% spacing token coverage (except structural exceptions) and consistent section padding/gap patterns.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-layout-spacing-consistency/09-CONTEXT.md
@.planning/phases/07-css-foundation-token-system-audit/07-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate all remaining hardcoded spacing values to design tokens</name>
  <files>css/main.css</files>
  <action>
Audit css/main.css for all remaining hardcoded margin, padding, and gap values that use raw px, rem, or em units. Migrate each to the appropriate --space-* token.

**Current spacing token scale:**
- --space-xs: 0.25rem (4px)
- --space-sm: 0.5rem (8px)
- --space-md: 1rem (16px)
- --space-lg: 1.5rem (24px)
- --space-xl: 2rem (32px)
- --space-2xl: 3rem (48px)
- --space-3xl: 4rem (64px)
- --space-4xl: 5rem (80px)
- --space-5xl: 6rem (96px)

**Known hardcoded values to migrate (from audit):**

Non-zero hardcoded spacing values:
- `padding: 2px 6px` (line ~180, inline code) -> Use var(--space-xs) scale or keep as structural if it's a tiny UI element
- `padding: 12px` (line ~329, skip link focus) -> var(--space-md) (12px ~ 0.75rem, closest to 1rem)
- `gap: 10px` (line ~672) -> var(--space-sm) (8px is close enough)
- `margin: 1.2rem 0` (lines ~1684, ~2024) -> var(--space-md) (1rem) or var(--space-lg) (1.5rem) — use var(--space-md) as 1.2rem is closer
- `padding: 14px 20px` (line ~2961, nav menu mobile) -> structural nav exception, keep as-is per user decision (nav uses own spacing)
- `margin: var(--space-md) 20px` (line ~2967, nav theme toggle) -> structural nav exception, keep as-is
- `0.75rem` used extensively in mobile responsive (~14 instances) -> var(--space-md) is 1rem, but 0.75rem is between sm (0.5rem) and md (1rem). Add a new token --space-ms (medium-small, 0.75rem) OR map to var(--space-sm). Best approach: since 0.75rem is used specifically for mobile horizontal padding as a tighter version of desktop spacing, it's a consistent pattern. Map all 0.75rem mobile padding values to var(--space-sm) (0.5rem would be too tight) or add a --space-ms token. Decision: Add NO new tokens per simplicity principle. Map 0.75rem -> var(--space-md) would increase mobile padding, which is wrong. Keep 0.75rem as a mobile-specific literal since it's a deliberate mobile override. Actually per LAYOUT-01 requirement "no raw pixel/rem values" — we need a token. Add `--space-ms: 0.75rem` to :root to bridge the gap between sm and md.
- `0.6rem` padding values (~5 instances) -> var(--space-sm) (0.5rem, close enough for small component padding)
- `0.5rem` padding values (~3 instances) -> var(--space-sm) (exact match)
- `0.2rem` padding values (~4 instances) -> var(--space-xs) (0.25rem, close enough)
- `0.1rem` padding (~1 instance) -> var(--space-xs) (tiny padding, closest token)
- `0.3rem` margin values (~3 instances) -> var(--space-xs) (0.25rem, close enough)
- `0.8rem` margin values (~2 instances) -> var(--space-sm) or var(--space-ms) (0.75rem)
- `1.2rem` padding/margin values in various components (~8 instances) -> var(--space-md)
- `2.5rem` padding-left values (~3 instances) -> var(--space-2xl) (3rem) or var(--space-xl) (2rem). Use var(--space-xl) since 2.5rem is structural indent for timeline components — keep as structural exception OR use var(--space-2xl)
- `margin-right: 20px` (line ~901) -> var(--space-xl) (32px) or var(--space-lg) (24px). Use var(--space-lg) (24px closest to 20px)

**Structural exceptions to KEEP as hardcoded (per Phase 7 decision):**
- Navigation hamburger dimensions (px values for touch targets, widths, heights)
- Navigation menu link padding (14px 20px) — user decided nav has own spacing system
- Navigation theme toggle margin (20px) — same nav exception
- Border widths (1px, 2px, 3px, etc.)
- Width/height values (dimensional, not spacing)
- Position offsets (left: -2.25rem, left: -2.35rem for timeline dots)
- `margin: -1px` for sr-only (accessibility pattern)
- `margin: 0` and `padding: 0` resets (zero values don't need tokens)
- Timeline left positioning values (-2.25rem, -2.35rem) — structural positioning

**Steps:**
1. Add `--space-ms: 0.75rem;` token to :root block after --space-sm (for mobile-specific horizontal padding)
2. Systematically replace each hardcoded value with its token equivalent
3. Use find-and-replace for recurring patterns (e.g., all `0.75rem` mobile padding -> `var(--space-ms)`)
4. Verify no non-structural hardcoded spacing remains
  </action>
  <verify>
Run grep to confirm:
- `grep -cP '(margin|padding|gap):\s*[1-9]' css/main.css` returns only structural exceptions (nav, timeline positioning)
- `grep -cP '(margin|padding|gap).*\d+(px|rem|em)' css/main.css` returns only structural exceptions + zero values
- Count remaining hardcoded values and confirm each is a documented structural exception
- CSS file parses without errors: no unclosed brackets or syntax issues
  </verify>
  <done>
All margin, padding, and gap values in css/main.css use --space-* tokens except documented structural exceptions (nav hamburger dimensions, timeline positioning offsets, zero resets, border widths). New --space-ms token (0.75rem) added for mobile horizontal padding pattern.
  </done>
</task>

<task type="auto">
  <name>Task 2: Normalize section spacing rhythm for consistent visual flow</name>
  <files>css/main.css</files>
  <action>
Review and normalize section-level vertical spacing across all page types for consistent visual rhythm. Target: balanced, professional density (GitHub/Linear feel per user decision).

**Section spacing audit and normalization:**

1. **Desktop section padding**: Verify all `section` rules use `var(--space-4xl) var(--space-xl)` (80px vertical, 32px horizontal) as the base pattern. This is already in the global `section` rule. Check that page-specific section overrides don't create inconsistency — if any page sections override with different vertical padding, normalize unless there's a specific reason (e.g., hero sections intentionally larger).

2. **Hero section spacing**:
   - Index hero: `var(--space-5xl) var(--space-xl)` (96px vertical) — larger for impact, keep
   - Hero-minimal (philosophy, faq, contact, technologies, portfolio): `var(--space-4xl) var(--space-xl)` (80px vertical) — consistent across all minimal heroes
   - Testimonials/exhibit heroes: verify consistency with hero-minimal

3. **Mobile section spacing** (within @media max-width: 768px):
   - All sections currently use `var(--space-2xl) var(--space-ms)` after token migration — verify this is consistent
   - Heroes on mobile: index hero gets `var(--space-3xl) var(--space-ms)`, hero-minimal and other heroes get `var(--space-2xl) var(--space-ms)` — consistent pattern

4. **Container max-width**: Already 1200px per user decision. Verify no page-specific containers override this differently.

5. **Inter-element spacing within sections**: Review heading margin-bottom, paragraph spacing, and element gaps. Normalize:
   - Section heading margin-bottom: var(--space-md) consistently
   - Subsection heading margin-bottom: var(--space-sm) consistently
   - Paragraph margin-bottom: use default browser spacing (don't override unless needed)
   - Card/grid gaps: var(--space-xl) for main grids, var(--space-lg) for tighter grids

6. **Footer spacing**: Desktop `var(--space-xl)` padding. Mobile `var(--space-md) var(--space-ms)`. Ensure consistency.

**Do NOT change:**
- Typography (Phase 10)
- Colors (Phase 11)
- Content structure (Phase 8 complete)
- Navigation spacing (excluded per user decision)
  </action>
  <verify>
Verify section spacing consistency:
- `grep -n 'section.*padding' css/main.css` — all desktop sections use --space-4xl vertical (except index hero --space-5xl)
- `grep -n 'hero-minimal.*padding\|hero.*padding' css/main.css` — verify hero patterns consistent
- No conflicting section padding overrides exist across page-specific CSS
- Container max-width is 1200px everywhere
  </verify>
  <done>
Section spacing normalized across all 17 pages: consistent desktop section padding (--space-4xl vertical), consistent mobile section padding (--space-2xl vertical), hero sections follow clear hierarchy (index larger, all others consistent), container max-width uniform at 1200px. Visual rhythm established with balanced, professional density.
  </done>
</task>

</tasks>

<verification>
1. Zero hardcoded margin/padding/gap values remain except structural exceptions (nav dimensions, timeline positions, zero resets, border widths)
2. New --space-ms token defined in :root
3. All sections across all page types use consistent spacing tokens
4. CSS parses without syntax errors
5. No visual regressions — token values match or closely approximate original hardcoded values
</verification>

<success_criteria>
- LAYOUT-01: All spacing uses design tokens — verified by grep showing only structural exceptions remain
- LAYOUT-04 (partial): Section spacing rhythm normalized across all pages — consistent padding patterns, hero hierarchy, uniform container widths
- CSS file is syntactically valid
- No new structural HTML changes needed — pure CSS modifications
</success_criteria>

<output>
After completion, create `.planning/phases/09-layout-spacing-consistency/09-01-SUMMARY.md`
</output>
