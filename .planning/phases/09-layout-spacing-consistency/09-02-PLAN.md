---
phase: 09-layout-spacing-consistency
plan: 02
type: execute
wave: 2
depends_on:
  - 09-01
files_modified:
  - css/main.css
autonomous: true
requirements:
  - LAYOUT-02
  - LAYOUT-03
  - LAYOUT-04

must_haves:
  truths:
    - "Mobile layout at 320px viewport shows no horizontal overflow, no cramped sections, and consistent edge padding on all 17 pages"
    - "Mobile layout at 768px viewport shows proper responsive breakpoints with no layout breakage on all 17 pages"
    - "Desktop layout at 1024px and 1920px viewports shows balanced spacing that scales appropriately"
    - "Cards, sections, and CTAs are visually aligned consistently across all pages"
    - "Visual rhythm has intentional whitespace with breathing room between sections"
  artifacts:
    - path: "css/main.css"
      provides: "Verified and polished responsive spacing with component alignment"
      contains: "var(--space-"
  key_links:
    - from: "css/main.css @media (max-width: 768px)"
      to: "all HTML pages"
      via: "mobile responsive overrides"
      pattern: "@media.*768px"
---

<objective>
Verify and polish responsive layout at all four target viewports (320px, 768px, 1024px, 1920px) and ensure component alignment consistency across all pages.

Purpose: LAYOUT-02 requires mobile verification, LAYOUT-03 requires component alignment consistency, and LAYOUT-04 requires intentional whitespace. After Plan 01 normalizes spacing tokens, this plan verifies the results look correct at all viewports and fixes any spacing/alignment issues.

Output: Polished css/main.css with verified responsive behavior and consistent component alignment.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-layout-spacing-consistency/09-CONTEXT.md
@.planning/phases/09-layout-spacing-consistency/09-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify and fix mobile layout at 320px and 768px viewports</name>
  <files>css/main.css</files>
  <action>
Use Playwright (already available in the project via @axe-core/playwright) to programmatically verify mobile layout at 320px and 768px viewports across all 17 pages. Check for:

1. **Horizontal overflow detection**: For each page at 320px and 768px, check that `document.documentElement.scrollWidth <= document.documentElement.clientWidth` — no content extends beyond viewport.

2. **Edge padding consistency**: Verify that content sections have consistent horizontal padding (should be var(--space-ms) = 0.75rem = 12px at mobile from Plan 01).

3. **Card grid stacking**: Verify all card grids (finding-cards, exhibit-cards, specialty-cards, tech-cards, flagship-cards) collapse to single column at mobile viewports.

4. **No cramped sections**: Check that no text element has font-size below 12px at 320px viewport. Check that no interactive element has height/width below 44px (touch target minimum).

5. **Table card transformation**: Verify that all tables (directory-table, personnel-table, resolution-table) transform to card layout at mobile viewports (no horizontal scrolling).

**If issues found**, fix them in css/main.css:
- Horizontal overflow: add `overflow-x: hidden` to container or reduce element width
- Cramped text: increase mobile font-size overrides
- Touch target issues: increase min-height/min-width
- Card grid issues: ensure `grid-template-columns: 1fr` at mobile

**Pages to verify (all 19 HTML files):**
index.html, philosophy.html, faq.html, contact.html, testimonials.html, portfolio.html, technologies.html, review.html, exhibits/exhibit-a.html through exhibit-l.html (11 exhibit pages, no exhibit-e)

**Verification approach:**
Write a temporary Node.js script using Playwright to:
1. Launch browser at 320px viewport
2. Visit each page via file:// protocol
3. Check scrollWidth vs clientWidth
4. Take screenshots if overflow detected
5. Repeat at 768px
6. Report results

Delete the script after verification.
  </action>
  <verify>
- Playwright verification script reports zero horizontal overflow issues at 320px and 768px viewports
- All card grids confirmed single-column at mobile
- All touch targets >= 44px
- No text elements below 12px font-size
  </verify>
  <done>
Mobile layout verified and fixed at 320px and 768px viewports across all 17 pages: zero horizontal overflow, consistent edge padding, proper card grid stacking, adequate touch targets, and table card transformation working correctly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify desktop layout and fix component alignment consistency</name>
  <files>css/main.css</files>
  <action>
Verify desktop layout at 1024px and 1920px viewports and ensure component alignment consistency across all pages.

**Desktop verification checklist:**

1. **1024px viewport** (tablet/small desktop):
   - Container (max-width: 1200px) fills most of the viewport width with appropriate side margins
   - Card grids show correct column counts (2-3 columns depending on component)
   - Section padding provides adequate breathing room without excessive whitespace
   - Hero sections are proportional to viewport

2. **1920px viewport** (full HD desktop):
   - Content is centered with balanced margins on both sides
   - max-width: 1200px prevents content from becoming too wide
   - Background sections extend full width while content stays contained
   - No awkward gaps between elements at wide viewport

**Component alignment audit:**

3. **Cross-page alignment consistency:**
   - All `.container` elements use the same max-width (1200px) and centering
   - Section heading styles (margins, padding) are consistent across index, philosophy, faq, contact, testimonials, portfolio, technologies, exhibit pages
   - Card components (finding-card, exhibit-card, specialty-card, tech-card, flagship-card) use consistent padding, border-radius, and shadow
   - CTA buttons (btn, btn-primary, btn-secondary, btn-social) use consistent sizing and spacing
   - Stats bars use consistent grid pattern and gap spacing
   - Footer uses same padding and alignment across all pages

4. **Grid gap consistency:**
   - Review all grid/flex gap values — normalize to use --space-xl (2rem/32px) for primary content grids and --space-lg (1.5rem/24px) for tighter grids
   - Ensure card grids use consistent gap values across all page types

5. **Whitespace rhythm** (LAYOUT-04):
   - Sections should alternate with consistent vertical separation
   - No abrupt spacing changes between adjacent sections
   - Generous but not excessive whitespace between major content blocks
   - Heading-to-content spacing consistent within sections

**Fix any inconsistencies found:**
- Normalize card padding across all card types
- Normalize section heading margins
- Fix any grid gap inconsistencies
- Adjust any desktop-specific spacing that looks unbalanced

**Use Playwright at 1024px and 1920px viewports to verify:**
- Take screenshots of key pages (index, portfolio, exhibit-a, technologies) at both viewports
- Verify visual balance and alignment
  </action>
  <verify>
- Desktop screenshots at 1024px and 1920px show balanced, professional layout
- grep for grid gap values shows consistent patterns (--space-xl for primary, --space-lg for secondary)
- All container elements use max-width: 1200px
- Card padding is consistent across card types
- Section heading margins are normalized
  </verify>
  <done>
Desktop layout verified at 1024px and 1920px viewports. Component alignment consistent across all pages: uniform container max-width, normalized card padding and shadows, consistent grid gaps, balanced section heading margins, and intentional whitespace rhythm between sections.
  </done>
</task>

</tasks>

<verification>
1. Mobile: Zero horizontal overflow at 320px and 768px across all 17 pages
2. Mobile: Consistent edge padding using spacing tokens
3. Mobile: Card grids collapse to single column
4. Desktop: Content centered within 1200px max-width at 1920px
5. Desktop: Balanced layout at 1024px
6. Alignment: Cards, sections, CTAs use consistent spacing across pages
7. Rhythm: Intentional whitespace between sections with no abrupt changes
</verification>

<success_criteria>
- LAYOUT-02: Mobile layout verified at 320px and 768px — no cramped sections, no overflow, consistent padding
- LAYOUT-03: Component alignment consistent — cards, sections, CTAs visually aligned across all pages
- LAYOUT-04: Generous whitespace with intentional visual rhythm — professional editorial feel
- All fixes use design tokens (no new hardcoded values introduced)
</success_criteria>

<output>
After completion, create `.planning/phases/09-layout-spacing-consistency/09-02-SUMMARY.md`
</output>
