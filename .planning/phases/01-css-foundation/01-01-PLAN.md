---
phase: 01-css-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - css/main.css
  - index.html
  - philosophy.html
  - faq.html
  - contact.html
  - testimonials.html
  - exhibits/exhibit-a.html
  - exhibits/exhibit-b.html
  - exhibits/exhibit-c.html
  - exhibits/exhibit-d.html
  - exhibits/exhibit-e.html
  - exhibits/exhibit-f.html
  - exhibits/exhibit-g.html
  - exhibits/exhibit-h.html
  - exhibits/exhibit-i.html
autonomous: false

must_haves:
  truths:
    - "All 14 HTML pages link to /css/main.css via <link> tag"
    - "All 14 HTML pages contain zero inline <style> blocks"
    - "All pages render identically to before extraction (no visual regressions)"
    - "Color value discrepancies between design spec and implementation are documented for user review"
  artifacts:
    - path: "css/main.css"
      provides: "All extracted CSS from 14 pages, organized by page with comment headers"
      contains: ":root"
  key_links:
    - from: "index.html"
      to: "css/main.css"
      via: "<link rel='stylesheet' href='/css/main.css'>"
      pattern: "link.*stylesheet.*css/main\\.css"
    - from: "exhibits/exhibit-a.html"
      to: "css/main.css"
      via: "<link rel='stylesheet' href='/css/main.css'>"
      pattern: "link.*stylesheet.*/css/main\\.css"
---

<objective>
Pass 1: Extract all inline CSS from 14 HTML pages into `/css/main.css` verbatim, audit color values against the design spec, and flag discrepancies for user review.

Purpose: This is the safety-first extraction pass (per locked decision: "exact extraction first, consolidate second"). CSS moves out of HTML files unchanged, preserving every rule exactly as-is. Consolidation and tokenization happen in Plan 02 after this is verified stable.

Output: `/css/main.css` with all CSS organized by page, all 14 HTML files linking to external stylesheet, color audit report.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-css-foundation/01-CONTEXT.md
@.planning/phases/01-css-foundation/01-RESEARCH.md

Source files (read all 14 before modifying any):
@index.html
@philosophy.html
@faq.html
@contact.html
@testimonials.html
@exhibits/exhibit-a.html
@exhibits/exhibit-b.html
@exhibits/exhibit-c.html
@exhibits/exhibit-d.html
@exhibits/exhibit-e.html
@exhibits/exhibit-f.html
@exhibits/exhibit-g.html
@exhibits/exhibit-h.html
@exhibits/exhibit-i.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract all inline CSS to /css/main.css and link all pages</name>
  <files>
    css/main.css
    index.html
    philosophy.html
    faq.html
    contact.html
    testimonials.html
    exhibits/exhibit-a.html
    exhibits/exhibit-b.html
    exhibits/exhibit-c.html
    exhibits/exhibit-d.html
    exhibits/exhibit-e.html
    exhibits/exhibit-f.html
    exhibits/exhibit-g.html
    exhibits/exhibit-h.html
    exhibits/exhibit-i.html
  </files>
  <action>
    **Read all 14 HTML files first** to understand the full CSS landscape before making any changes.

    **Create `/css/` directory and `/css/main.css`:**

    1. Create the `css/` directory at project root.

    2. Build `main.css` using this structure — extract the `<style>` block content from each page verbatim, organized with clear section headers:

    ```
    /* ================================================================
       Pattern 158 Solutions - Extracted Styles (Pass 1: Verbatim)
       Generated from inline <style> blocks across 14 HTML pages.
       DO NOT consolidate yet — Pass 2 handles deduplication.
       ================================================================ */

    /* ================================================================
       SHARED BASE STYLES
       (Identical across all 14 pages — extracted once from index.html)
       Includes: :root vars, reset, body, focus states, skip-link,
                 headings, code, navigation, footer
       ================================================================ */
    [paste shared base CSS here verbatim]

    /* ================================================================
       PAGE: index.html
       (Page-specific styles only — shared base excluded)
       ================================================================ */
    [paste index-specific CSS here]

    /* ================================================================
       PAGE: philosophy.html
       ================================================================ */
    [paste philosophy-specific CSS here]

    /* (repeat for faq, contact, testimonials) */

    /* ================================================================
       PAGES: exhibits (shared across all 9 exhibit pages)
       ================================================================ */
    [paste shared exhibit CSS here]

    /* ================================================================
       PAGE: exhibits/exhibit-a.html (unique additions)
       ================================================================ */
    [paste exhibit-a-only CSS here]

    /* (repeat for any exhibit with unique CSS beyond the shared exhibit base) */
    ```

    **Extraction rules:**
    - Copy CSS content character-for-character. Do NOT rename classes, change values, fix inconsistencies, or add tokens yet.
    - The shared base (~90 lines: :root, reset, body, focus states, skip-link, headings, code, nav, footer) is identical across all 14 pages. Extract it ONCE from index.html.
    - For each remaining page, extract ONLY the CSS that differs from the shared base.
    - Keep the existing `:root` variable names (--navy, --teal, etc.) unchanged in this pass. Semantic renaming is Plan 02.
    - Keep responsive/media query blocks with their parent page section (do not consolidate media queries yet).
    - Exhibit pages (b through i) share nearly identical CSS with minor variations. Extract the common exhibit CSS once, then note any per-exhibit differences (exhibit-a has the most unique CSS with tables, timelines, etc.).

    **Modify all 14 HTML files:**

    3. In each HTML file's `<head>`, add the stylesheet link AFTER the Google Fonts link and BEFORE `<title>`:
       - Root pages (index, philosophy, faq, contact, testimonials): `<link rel="stylesheet" href="/css/main.css">`
       - Exhibit pages: `<link rel="stylesheet" href="/css/main.css">`
       Use absolute-from-root paths for ALL pages (per research recommendation — prevents path resolution issues in exhibits/ subdirectory).

    4. Remove the entire `<style>...</style>` block from each HTML file.

    5. Do NOT modify anything else in the HTML files — no class changes, no structural changes, no body classes yet.

    **Important:** If any page has CSS rules that are ALMOST identical to the shared base but with subtle differences (e.g., different padding values on `.hero`), keep BOTH versions — the shared version in the base section and the page-specific override in the page section. Do NOT merge or deduplicate. This ensures zero visual regression.
  </action>
  <verify>
    Run these checks:
    - `grep -rl '<style>' *.html exhibits/*.html` should return NO results (all inline styles removed)
    - `grep -rl 'css/main.css' *.html exhibits/*.html` should return all 14 HTML files
    - `test -f css/main.css && echo "exists"` should print "exists"
    - `wc -l css/main.css` should show roughly 1500-2500 lines (all extracted CSS before dedup)
    - Open index.html and at least one exhibit page in a browser to confirm they render correctly
  </verify>
  <done>
    All 14 HTML pages link to `/css/main.css` and contain zero `<style>` blocks. The CSS file contains all extracted styles organized by page section with clear comment headers. No CSS rules were modified, renamed, or consolidated — this is a pure extraction.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Color audit and visual verification</name>
  <files>css/main.css</files>
  <action>
    Present color audit findings and visual verification checklist to user. The extraction is complete; user must review rendering fidelity and decide on the color discrepancy before Plan 02 can proceed.

    **Color Audit Finding (MUST REVIEW):**

    The design spec defines brand colors as:
    - Navy: `#0a1628`
    - Teal: `#2dd4bf`
    - Cream: `#fdf6e3`

    But the ACTUAL implemented colors across all 14 pages are:
    - Navy: `#1a2838`
    - Teal: `#17a2b8`
    - Cream: `#faf9f6`

    These are significantly different values (not just rounding). The implemented colors have been live on the site and are what users see today.

    **Decision needed:** Which values should be the source of truth for the design token system?
    - Option A: Keep implemented values (`#1a2838`, `#17a2b8`, `#faf9f6`) — preserves current visual appearance
    - Option B: Switch to design spec values (`#0a1628`, `#2dd4bf`, `#fdf6e3`) — matches original design intent
    - Option C: Something else (specify)

    Additional hardcoded colors found that need token assignment:
    - `#138496` (teal hover/dark variant)
    - `#666666` / `#666` (muted text)
    - `#999999` / `#999` (light text, dates)
    - `#555555` / `#555` (medium text)
    - `#888888` / `#888` (source notes)
    - `#ddd` (border color)
    - `white` / `#ffffff` (card backgrounds, section backgrounds)
    - Various `rgba()` values for shadows, overlays, hover states
  </action>
  <verify>
    User opens these pages in a browser and confirms identical rendering:
    - index.html (hero with background image, finding cards, philosophy grid)
    - testimonials.html (exhibit cards with quotes, metrics section)
    - philosophy.html (brand elements list, methodology steps)
    - exhibits/exhibit-a.html (the most complex — has tables, timelines, milestones)
    - One other exhibit page (e.g., exhibit-e.html) to confirm exhibit template works
  </verify>
  <done>
    User has confirmed visual fidelity ("approved") and selected a color option (A, B, or C). Both decisions are recorded in the plan SUMMARY for Plan 02 to consume.
  </done>
</task>

</tasks>

<verification>
- Zero `<style>` blocks remain in any HTML file
- All 14 HTML files contain `<link rel="stylesheet" href="/css/main.css">`
- `/css/main.css` exists with all extracted CSS
- Pages render identically to pre-extraction state
- Color discrepancy documented and user decision captured
</verification>

<success_criteria>
All inline CSS is externalized to `/css/main.css` with zero visual regressions. User has reviewed and decided on color source of truth. Ready for Plan 02 consolidation pass.
</success_criteria>

<output>
After completion, create `.planning/phases/01-css-foundation/01-01-SUMMARY.md`
</output>
