---
phase: 01-css-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - css/main.css
  - index.html
  - philosophy.html
  - faq.html
  - contact.html
  - testimonials.html
  - exhibits/exhibit-a.html
  - exhibits/exhibit-b.html
  - exhibits/exhibit-c.html
  - exhibits/exhibit-d.html
  - exhibits/exhibit-e.html
  - exhibits/exhibit-f.html
  - exhibits/exhibit-g.html
  - exhibits/exhibit-h.html
  - exhibits/exhibit-i.html
autonomous: true

must_haves:
  truths:
    - "All color values in css/main.css reference CSS custom properties (no hardcoded hex/rgba in rule values)"
    - "Design tokens use semantic naming only (--color-primary, --color-background, not --navy, --teal)"
    - "All design values (colors, fonts, spacing, radii, shadows) are CSS custom properties in :root"
    - "Page-specific styles are scoped via body classes without affecting other pages"
    - "Duplicate CSS rules across page sections are consolidated into single shared rules"
    - "All pages render identically to pre-consolidation state"
  artifacts:
    - path: "css/main.css"
      provides: "Consolidated stylesheet with design token system, shared styles, and page-scoped overrides"
      contains: "--color-primary"
      min_lines: 800
  key_links:
    - from: "css/main.css :root"
      to: "css/main.css rule values"
      via: "var() references"
      pattern: "var\\(--"
    - from: "index.html <body>"
      to: "css/main.css page-specific rules"
      via: "body class"
      pattern: "class=\"page-index\""
    - from: "exhibits/exhibit-a.html <body>"
      to: "css/main.css exhibit rules"
      via: "body class"
      pattern: "class=\"page-exhibit"
---

<objective>
Pass 2: Consolidate extracted CSS into a design system with semantic tokens, deduplicate shared styles, and scope page-specific CSS via body classes.

Purpose: Transform the verbatim extraction (Plan 01) into a maintainable design system. This establishes the CSS custom property infrastructure that Phase 2 (dark mode) requires for theme switching. All hardcoded values become semantic tokens; duplicate rules merge into shared sections.

Output: Consolidated `/css/main.css` with ~20-30 design tokens, deduplicated shared styles, body-class-scoped page overrides. All 14 HTML files get body classes.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-css-foundation/01-CONTEXT.md
@.planning/phases/01-css-foundation/01-RESEARCH.md
@.planning/phases/01-css-foundation/01-01-SUMMARY.md

@css/main.css
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create design token system and consolidate shared CSS</name>
  <files>css/main.css</files>
  <action>
    **Read the Plan 01 SUMMARY first** to get the user's color decision (Option A, B, or C from the checkpoint).

    **Restructure `/css/main.css` into this architecture:**

    ```
    /* ================================================================
       Pattern 158 Solutions - Design System
       ================================================================ */

    /* === DESIGN TOKENS === */
    :root { ... }

    /* === RESET === */
    * { ... }

    /* === BASE TYPOGRAPHY === */
    body, headings, code, links ...

    /* === ACCESSIBILITY === */
    focus states, skip-link ...

    /* === LAYOUT === */
    .container, section ...

    /* === NAVIGATION === */
    nav, nav links ...

    /* === COMPONENTS === */
    .btn, .card (shared patterns) ...

    /* === PAGE: Index === */
    .page-index .hero { ... }
    .page-index specific styles ...

    /* === PAGE: Philosophy === */
    .page-philosophy specific styles ...

    /* === PAGE: FAQ === */
    .page-faq specific styles ...

    /* === PAGE: Contact === */
    .page-contact specific styles ...

    /* === PAGE: Testimonials === */
    .page-testimonials specific styles ...

    /* === PAGES: Exhibits (shared) === */
    .page-exhibit specific styles ...

    /* === PAGE: Exhibit A (unique) === */
    .page-exhibit-a specific styles ...

    /* === RESPONSIVE === */
    @media queries ...
    ```

    **Step 1: Create semantic design tokens in `:root {}`**

    Use the color values from the user's checkpoint decision (Plan 01 SUMMARY). Create these tokens:

    ```css
    :root {
        /* --- Colors --- */
        --color-primary: [teal value per user decision];
        --color-primary-hover: #138496;
        --color-accent: #b8860b;
        --color-background: [cream value per user decision];
        --color-background-alt: #e8e8e8;
        --color-surface: #ffffff;
        --color-text: #2d3436;
        --color-text-muted: #666666;
        --color-text-light: #999999;
        --color-text-medium: #555555;
        --color-text-source: #888888;
        --color-inverse: [navy value per user decision];
        --color-inverse-text: [cream value per user decision];
        --color-border: #dddddd;

        /* --- Typography --- */
        --font-heading: 'Bebas Neue', 'Arial Black', sans-serif;
        --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        --font-mono: 'JetBrains Mono', 'Courier New', monospace;

        /* --- Spacing --- */
        --space-xs: 0.25rem;
        --space-sm: 0.5rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;
        --space-2xl: 3rem;
        --space-3xl: 4rem;
        --space-4xl: 5rem;
        --space-5xl: 6rem;

        /* --- Border Radius --- */
        --radius-sm: 3px;
        --radius-md: 4px;
        --radius-pill: 20px;

        /* --- Shadows --- */
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
        --shadow-md: 0 2px 10px rgba(0, 0, 0, 0.1);
        --shadow-focus: 0 0 0 4px rgba(23, 162, 184, 0.2);
        --shadow-focus-inverse: 0 0 0 4px rgba(250, 249, 246, 0.3);
        --shadow-hover: 0 4px 8px rgba(0, 0, 0, 0.2);

        /* --- Overlays --- */
        --overlay-hero: rgba(26, 40, 56, 0.65);
        --overlay-grid-line: rgba(23, 162, 184, 0.03);
        --overlay-hover-row: rgba(23, 162, 184, 0.04);
    }
    ```

    NOTE: If the user chose Option B (design spec values), the rgba values for overlays and shadows may need adjustment to match the new base colors. Compute rgba values from the new hex values.

    Per locked decision: semantic names ONLY. The old `--navy`, `--teal`, `--charcoal`, `--cream`, `--light-gray`, `--brass` variable names are REMOVED and replaced by semantic equivalents.

    **Step 2: Deduplicate shared CSS**

    The shared base (reset, body, focus states, skip-link, headings, code, nav, container, footer) was extracted once in Plan 01. Verify it is not duplicated. These become the unscoped global rules.

    **Step 3: Replace ALL hardcoded values with token references**

    Search the entire file for:
    - Hex colors (`#1a2838`, `#17a2b8`, `#2d3436`, `#faf9f6`, `#e8e8e8`, `#b8860b`, `#138496`, `#666`, `#999`, `#555`, `#888`, `#ddd`, `white`, `#ffffff`)
    - `rgba()` values used in shadows, overlays, borders
    - Font family stacks
    - Repeated spacing values that match the scale

    Replace each with the corresponding `var(--token-name)`.

    **Important exceptions (keep as literal values):**
    - `0` (zero values)
    - `transparent`
    - `none`
    - Percentage values
    - `inherit`, `revert`, `initial`
    - `1px` borders (too granular to tokenize)
    - Transition durations (`0.3s`)
    - z-index values (`100`, `9999`)
    - Unit-specific values that don't match the spacing scale (e.g., `48px` for logo height)

    **Step 4: Scope page-specific CSS with body classes**

    For page-specific CSS blocks, prefix selectors with the body class:
    - `.page-index` for index.html-specific styles
    - `.page-philosophy` for philosophy.html
    - `.page-faq` for faq.html
    - `.page-contact` for contact.html
    - `.page-testimonials` for testimonials.html
    - `.page-exhibit` for shared exhibit styles (all 9 pages)
    - `.page-exhibit-a` through `.page-exhibit-i` for per-exhibit unique styles (if any beyond exhibit-a)

    Shared styles that appear on ALL pages (nav, footer, typography, focus states) remain UNSCOPED.

    **Step 5: Extract shared card component**

    Per research recommendation, the `.finding-card` (index), `.exhibit-card` (testimonials), and similar patterns across exhibit detail pages share a common card pattern. Extract a shared `.card` base component with variants:
    - `.card` — shared base (background, padding, shadow, transition)
    - `.card--finding` — index page finding cards (border-left color, margins)
    - `.card--exhibit` — testimonials exhibit cards (border-left, corner fold)
    - Keep existing class names in HTML unchanged for now; add the card component CSS as an available pattern

    Actually, DO NOT rename existing HTML classes in this plan. Only consolidate CSS. The existing `.finding-card` and `.exhibit-card` class names in HTML should continue to work. Merge their shared properties into a common section and keep page-scoped overrides for differences.

    **Step 6: Consolidate responsive styles**

    Gather all `@media` blocks from page sections into a single responsive section at the bottom of the file. Organize by breakpoint, then by page scope within each breakpoint.
  </action>
  <verify>
    Run these checks:
    - `grep -c 'var(--' css/main.css` should show high count (100+) — most values reference tokens
    - `grep -E '#[0-9a-fA-F]{3,6}' css/main.css` should only show values INSIDE `:root {}` or in the exceptions list (rgba computations). No hardcoded colors in rule bodies outside :root.
    - `grep -c '\-\-navy\|--teal\|--charcoal\|--cream\|--light-gray\|--brass' css/main.css` should be 0 (old variable names removed)
    - `grep -c '\-\-color-primary\|--color-background\|--color-inverse\|--color-text' css/main.css` should be > 0 (new semantic names present)
    - `wc -l css/main.css` should show roughly 800-1500 lines (reduced from Plan 01 through deduplication)
  </verify>
  <done>
    `/css/main.css` contains a complete design token system with semantic naming. All hardcoded color/font/spacing values reference CSS custom properties. Duplicate CSS across pages is consolidated. Page-specific styles are scoped via body class prefixes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add body classes to all 14 HTML pages</name>
  <files>
    index.html
    philosophy.html
    faq.html
    contact.html
    testimonials.html
    exhibits/exhibit-a.html
    exhibits/exhibit-b.html
    exhibits/exhibit-c.html
    exhibits/exhibit-d.html
    exhibits/exhibit-e.html
    exhibits/exhibit-f.html
    exhibits/exhibit-g.html
    exhibits/exhibit-h.html
    exhibits/exhibit-i.html
  </files>
  <action>
    Add body classes to each HTML file's `<body>` tag for page-specific CSS scoping:

    - `index.html`: `<body class="page-index">`
    - `philosophy.html`: `<body class="page-philosophy">`
    - `faq.html`: `<body class="page-faq">`
    - `contact.html`: `<body class="page-contact">`
    - `testimonials.html`: `<body class="page-testimonials">`
    - `exhibits/exhibit-a.html`: `<body class="page-exhibit page-exhibit-a">`
    - `exhibits/exhibit-b.html`: `<body class="page-exhibit page-exhibit-b">`
    - `exhibits/exhibit-c.html`: `<body class="page-exhibit page-exhibit-c">`
    - `exhibits/exhibit-d.html`: `<body class="page-exhibit page-exhibit-d">`
    - `exhibits/exhibit-e.html`: `<body class="page-exhibit page-exhibit-e">`
    - `exhibits/exhibit-f.html`: `<body class="page-exhibit page-exhibit-f">`
    - `exhibits/exhibit-g.html`: `<body class="page-exhibit page-exhibit-g">`
    - `exhibits/exhibit-h.html`: `<body class="page-exhibit page-exhibit-h">`
    - `exhibits/exhibit-i.html`: `<body class="page-exhibit page-exhibit-i">`

    Note: Exhibit pages get TWO classes — `page-exhibit` for shared exhibit styles AND `page-exhibit-X` for per-exhibit overrides. This matches the locked decision that "9 exhibit pages treated as a group with shared exhibit layout styles."

    Do NOT change anything else in the HTML files. This task is body class addition only.
  </action>
  <verify>
    Run these checks:
    - `grep 'class="page-index"' index.html` should match
    - `grep 'class="page-exhibit page-exhibit-a"' exhibits/exhibit-a.html` should match
    - `grep -c 'class="page-' *.html exhibits/*.html` should total 14 (one per file)
    - Confirm no other HTML changes occurred (only the `<body>` tag modified per file)
  </verify>
  <done>
    All 14 HTML files have appropriate body classes for CSS scoping. Exhibit pages have both shared (`page-exhibit`) and specific (`page-exhibit-X`) classes. No other HTML changes were made.
  </done>
</task>

</tasks>

<verification>
- `css/main.css` uses semantic token names exclusively (no `--navy`, `--teal`, etc.)
- All hardcoded color values are replaced with `var()` references (except in `:root`)
- All 14 HTML files have body classes matching their CSS scope
- Page-specific CSS is prefixed with body class selectors
- Shared CSS (nav, footer, typography) is unscoped
- Responsive styles consolidated at bottom of file
- Design tokens cover: colors (10+), fonts (3), spacing (7+), radii (3), shadows (3+)
</verification>

<success_criteria>
The CSS file is a fully tokenized design system. Every value that will need to change for dark mode (Phase 2) is a CSS custom property. Duplicate styles are eliminated. Page-specific styles are cleanly scoped. The file is organized, readable, and maintainable.
</success_criteria>

<output>
After completion, create `.planning/phases/01-css-foundation/01-02-SUMMARY.md`
</output>
