---
phase: 01-css-foundation
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - css/main.css
autonomous: false

must_haves:
  truths:
    - "All 14 pages render identically to their pre-extraction appearance"
    - "No inline <style> blocks remain in any HTML file"
    - "No hardcoded color hex/rgba values exist outside :root in css/main.css"
    - "Design tokens follow semantic naming convention (--color-*, --font-*, --space-*)"
    - "Browser loads stylesheet once and caches it across all page navigations"
  artifacts:
    - path: "css/main.css"
      provides: "Final consolidated design system stylesheet"
      contains: "--color-primary"
  key_links:
    - from: "css/main.css :root"
      to: "all rule values"
      via: "var() references throughout"
      pattern: "var\\(--color"
---

<objective>
Final verification of the complete CSS Foundation phase. Confirm visual fidelity across all page types, validate the design token system is complete, and fix any remaining issues.

Purpose: This is the quality gate before marking Phase 1 complete. The user visually inspects representative pages to confirm the extraction and consolidation introduced zero regressions. Any issues found here get fixed before proceeding to Phase 2 (dark mode).

Output: Verified, production-ready CSS architecture.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-css-foundation/01-01-SUMMARY.md
@.planning/phases/01-css-foundation/01-02-SUMMARY.md

@css/main.css
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Automated validation of CSS architecture</name>
  <files>css/main.css</files>
  <action>
    Run a comprehensive automated audit of the CSS foundation:

    **1. No inline styles remaining:**
    Search all 14 HTML files for `<style>` tags. Must find zero.

    **2. All pages linked to external stylesheet:**
    Search all 14 HTML files for `css/main.css` link tag. Must find all 14.

    **3. No hardcoded colors outside :root:**
    Parse `css/main.css` to verify that outside the `:root {}` block, no hex color values (#xxx, #xxxxxx), no `rgb()`, and no `rgba()` appear in property values.
    Exception: `rgba()` values inside `:root` for shadow/overlay tokens are allowed.
    Exception: `transparent`, `currentColor`, `inherit` are allowed anywhere.

    **4. Old variable names eliminated:**
    Search `css/main.css` for `--navy`, `--teal`, `--charcoal`, `--cream`, `--light-gray`, `--brass`. Must find zero occurrences.

    **5. Semantic tokens present:**
    Verify `:root` contains at minimum:
    - 10+ color tokens (--color-*)
    - 3 font tokens (--font-*)
    - 7+ spacing tokens (--space-*)
    - 3+ radius tokens (--radius-*)
    - 3+ shadow tokens (--shadow-*)

    **6. Body classes present:**
    Verify all 14 HTML files have body classes: `page-index`, `page-philosophy`, `page-faq`, `page-contact`, `page-testimonials`, `page-exhibit` (9 files).

    **7. Fix any issues found:**
    If any check fails, fix the issue in `css/main.css` or the relevant HTML file. Common fixes:
    - Missed hardcoded color: replace with appropriate token
    - Missing body class: add to `<body>` tag
    - Old variable reference: replace with semantic equivalent

    Print a summary report of all checks (pass/fail) and any fixes applied.
  </action>
  <verify>
    All 7 automated checks pass with zero failures. If fixes were applied, re-run all checks to confirm they pass.
  </verify>
  <done>
    Automated audit confirms: zero inline styles, all pages linked, all values tokenized, semantic naming throughout, body classes on all pages.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual regression verification across all page types</name>
  <files>
    index.html
    testimonials.html
    philosophy.html
    faq.html
    contact.html
    exhibits/exhibit-a.html
    exhibits/exhibit-e.html
  </files>
  <action>
    Present visual verification checklist to user. The complete CSS Foundation is in place:
    - All 14 HTML pages use external `/css/main.css` (no inline styles)
    - Design token system with ~25 semantic CSS custom properties
    - Shared styles deduplicated, page-specific styles scoped via body classes
    - Responsive breakpoints consolidated

    This checkpoint confirms the phase success criterion: "All pages render identically to before extraction."

    User must open each listed page in a browser and verify correct rendering per the checklist below.
  </action>
  <verify>
    User opens these pages in a browser and confirms correct rendering:

    1. **index.html** — Hero with background image and overlay, Pattern 158 visual bars, finding cards with teal left border, philosophy grid (navy background), footer
    2. **testimonials.html** — Hero with grid pattern overlay, stats bar with teal top border, exhibit cards with quotes/attribution/impact tags, detail exhibit (brass/gold accent), metrics section (navy background)
    3. **philosophy.html** — Minimal hero, brand elements definition list with teal borders, methodology numbered steps, influence sections
    4. **faq.html** — Accordion sections open/close correctly, category styling
    5. **contact.html** — Contact methods layout, testimonial blockquote styling
    6. **exhibits/exhibit-a.html** — Hero with grid pattern, report sections with numbered headings, tables, timeline/milestone styling, key fact badges
    7. **exhibits/exhibit-e.html** — Confirm exhibit template renders correctly, compare against exhibit-a for consistency

    Also verify: navigate between pages (stylesheet should cache — no flash/delay), check browser console for 404 errors, resize to mobile width (~375px) to confirm responsive styles work.
  </verify>
  <done>
    User confirms "approved" — all pages render correctly with no visual regressions. Phase 1 CSS Foundation is complete and ready for Phase 2 (dark mode).
  </done>
</task>

</tasks>

<verification>
Phase 1 success criteria (from ROADMAP.md):
1. All 14 HTML pages link to external stylesheet(s) and contain zero inline <style> blocks
2. All color values reference CSS custom properties (no hardcoded rgba/hex values in stylesheets)
3. All pages render identically to before extraction (visual regression test passes)
4. Design system tokens (colors, fonts, spacing) centralized in :root{} block
5. Browser caching enabled (stylesheet loads once, applies to all pages)
</verification>

<success_criteria>
User confirms visual fidelity across all page types. Automated audit shows zero hardcoded values outside :root. Phase 1 is complete and ready for Phase 2 (dark mode).
</success_criteria>

<output>
After completion, create `.planning/phases/01-css-foundation/01-03-SUMMARY.md`
</output>
