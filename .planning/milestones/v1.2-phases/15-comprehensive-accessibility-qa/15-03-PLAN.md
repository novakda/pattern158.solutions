---
phase: 15-comprehensive-accessibility-qa
plan: 03
type: execute
wave: 3
depends_on:
  - 15-02
files_modified:
  - accessibility.html
  - css/main.css
  - sitemap.xml
  - .planning/phases/15-comprehensive-accessibility-qa/15-ACCESSIBILITY-REPORT.md
  - .planning/phases/15-comprehensive-accessibility-qa/screenshots/
autonomous: false
requirements:
  - A11Y-02
  - A11Y-05

must_haves:
  truths:
    - "Every page has been screenshotted in light mode, dark mode, at desktop (1200px) and mobile (375px) viewports"
    - "Lighthouse accessibility scores captured for all 22 pages"
    - "Internal markdown report documents per-page WCAG criterion pass/fail"
    - "Public accessibility statement page exists on the site"
    - "All pages look polished in both light and dark modes at desktop and mobile"
  artifacts:
    - path: "accessibility.html"
      provides: "Public accessibility statement page on the site"
      min_lines: 50
    - path: ".planning/phases/15-comprehensive-accessibility-qa/15-ACCESSIBILITY-REPORT.md"
      provides: "Internal accessibility report with per-page WCAG checklist and Lighthouse scores"
      min_lines: 100
    - path: ".planning/phases/15-comprehensive-accessibility-qa/screenshots/"
      provides: "Screenshot evidence: every page in light/dark modes at desktop/mobile viewports"
  key_links:
    - from: "accessibility.html"
      to: "site navigation"
      via: "footer link or nav link"
      pattern: "accessibility\\.html"
    - from: ".planning/phases/15-comprehensive-accessibility-qa/15-ACCESSIBILITY-REPORT.md"
      to: "Lighthouse reports"
      via: "score summaries per page"
      pattern: "Lighthouse|lighthouse"
---

<objective>
Capture comprehensive visual evidence (screenshots in all modes/viewports), run full Lighthouse audits, produce an internal accessibility report with per-page WCAG checklists, and create a public accessibility statement page.

Purpose: This is the evidence and documentation phase. All fixes are done (Plans 01-02); now we capture proof of compliance that serves dual purposes: internal QA tracking AND portfolio showcase of accessibility commitment (per CONTEXT.md).

Output: Screenshot evidence for all 22 pages in 4 configurations; Lighthouse reports; internal WCAG report; public accessibility.html page.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-comprehensive-accessibility-qa/15-CONTEXT.md
@.planning/phases/15-comprehensive-accessibility-qa/15-01-SUMMARY.md
@.planning/phases/15-comprehensive-accessibility-qa/15-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Capture screenshot evidence and Lighthouse reports for all 22 pages</name>
  <files>
    .planning/phases/15-comprehensive-accessibility-qa/screenshots/
  </files>
  <action>
    Create a Playwright script that captures comprehensive visual evidence for every page. Per CONTEXT.md: "Full screenshot evidence: every page in both light/dark modes at key viewports" and "Full Lighthouse reports captured per page (performance, accessibility, best practices, SEO)."

    **Screenshot capture:**

    1. Create a script (e.g., `tests/capture-evidence.mjs`) that:
       - Starts a local HTTP server serving the project root
       - For each of the 22 pages, captures 4 screenshots:
         a. Light mode, desktop (1200px width)
         b. Light mode, mobile (375px width)
         c. Dark mode, desktop (1200px width)
         d. Dark mode, mobile (375px width)
       - Dark mode activated by setting `localStorage.setItem('theme', 'dark')` then reloading, or by clicking the theme toggle
       - Screenshots saved to `.planning/phases/15-comprehensive-accessibility-qa/screenshots/` with naming convention: `{page-name}-{mode}-{viewport}.png` (e.g., `index-light-desktop.png`, `exhibit-a-dark-mobile.png`)
       - Full page screenshots (not just viewport) to capture all content

    2. That's 22 pages x 4 configurations = 88 screenshots total.

    **Lighthouse audit:**

    3. Use Playwright's Chrome DevTools Protocol or the `lighthouse` npm package to run Lighthouse audits on each of the 22 pages. Capture all four categories per CONTEXT.md: performance, accessibility, best practices, SEO.

    4. If `lighthouse` CLI is available, run: `lighthouse http://localhost:8080/{page} --output=json --output-path=.planning/phases/15-comprehensive-accessibility-qa/lighthouse/{page}.json --chrome-flags="--headless"` for each page.

    5. If Lighthouse CLI is not readily available, use Playwright to extract computed accessibility metrics (axe-core scores already captured in Plan 02) and note that Lighthouse requires Chrome and may need separate installation. Document actual scores from axe-core as the primary evidence.

    **Practical fallback:** If full Lighthouse proves impractical in the CI environment (no Chrome binary, etc.), capture axe-core violation counts (already 0 from Plan 02) as the accessibility score equivalent, and note performance/SEO scores are deferred to manual Lighthouse run.

    IMPORTANT: The script should be re-runnable. Save it in the tests/ directory for future use.
  </action>
  <verify>
    - Screenshot directory contains 88 PNG files (22 pages x 4 configurations)
    - Spot-check 4 screenshots: index-light-desktop.png, index-dark-mobile.png, exhibit-a-light-mobile.png, faq-dark-desktop.png -- all render correctly
    - Lighthouse/axe-core audit data captured for all 22 pages
  </verify>
  <done>
    88 screenshots captured (every page in light/dark modes at desktop/mobile viewports). Lighthouse or axe-core audit data captured for all 22 pages. Evidence script saved for future re-runs.
  </done>
</task>

<task type="auto">
  <name>Task 2: Generate internal accessibility report with per-page WCAG checklist</name>
  <files>
    .planning/phases/15-comprehensive-accessibility-qa/15-ACCESSIBILITY-REPORT.md
  </files>
  <action>
    Create a comprehensive internal accessibility report. Per CONTEXT.md: "Per-page WCAG criterion checklist in internal report -- every page gets pass/fail per criterion" and "Audience is dual: useful internally AND presentable to employers/clients as proof of accessibility."

    **Report structure:**

    1. **Executive Summary**: Overall compliance status, total pages tested, total violations (should be 0), Lighthouse/axe-core score summary, date of audit.

    2. **Methodology**: Tools used (Playwright, axe-core, Lighthouse), WCAG version (2.1 AA), browser matrix, viewports tested, light/dark mode testing approach.

    3. **Per-Page Results Table**: For each of the 22 pages:
       - Page name and URL
       - axe-core violation count (light mode)
       - axe-core violation count (dark mode)
       - Lighthouse accessibility score (if captured)
       - Lighthouse performance/SEO/best-practices scores (if captured)
       - Semantic HTML status (pass/fail)
       - Heading hierarchy status (pass/fail)
       - Key findings or notes

    4. **WCAG AA Criterion Checklist**: For key WCAG 2.1 AA criteria, document pass/fail across the site:
       - 1.1.1 Non-text Content (alt text)
       - 1.3.1 Info and Relationships (semantic structure)
       - 1.3.2 Meaningful Sequence (reading order)
       - 1.4.1 Use of Color (not sole means)
       - 1.4.3 Contrast (Minimum) â€” 4.5:1
       - 1.4.4 Resize Text (200%)
       - 1.4.11 Non-text Contrast (3:1 for UI)
       - 2.1.1 Keyboard (all functionality)
       - 2.4.1 Bypass Blocks (skip link)
       - 2.4.2 Page Titled
       - 2.4.3 Focus Order
       - 2.4.4 Link Purpose (in context)
       - 2.4.6 Headings and Labels
       - 2.4.7 Focus Visible
       - 3.1.1 Language of Page
       - 4.1.1 Parsing
       - 4.1.2 Name, Role, Value

    5. **Cross-Browser Results**: Summary of Chromium/Firefox/WebKit test results.

    6. **Screenshots Index**: Link to screenshot files organized by page.

    7. **Issues Fixed During Audit**: Document any issues found and fixed during Plans 01-02, organized by category.

    Use data from Plan 01 (semantic fixes), Plan 02 (WCAG fixes, cross-browser results), and Task 1 (screenshots, Lighthouse scores) to populate the report.
  </action>
  <verify>
    - Report file exists at .planning/phases/15-comprehensive-accessibility-qa/15-ACCESSIBILITY-REPORT.md
    - Report contains per-page results for all 22 pages
    - Report contains WCAG criterion checklist with pass/fail status
    - Report references screenshot evidence
  </verify>
  <done>
    Comprehensive internal accessibility report complete with per-page WCAG criterion checklist, Lighthouse/axe-core scores, cross-browser results, and screenshot evidence index. Report is presentable to employers/clients.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create public accessibility statement page</name>
  <files>
    accessibility.html
    css/main.css
    sitemap.xml
  </files>
  <action>
    Create a public accessibility statement page for the website. Per CONTEXT.md: "Both internal markdown report (in .planning/) AND public accessibility statement page on the site." Claude's discretion on detail level and placement.

    **Page content:**

    1. **Match existing site design**: Use the same HTML structure as other pages (header, nav, main, footer). Use existing CSS classes and design tokens. Match the NTSB investigation aesthetic.

    2. **Statement content** (suggested structure):
       - Commitment statement: Pattern 158 Solutions is committed to ensuring digital accessibility
       - Standard: WCAG 2.1 Level AA
       - What was done: Automated testing (axe-core), manual testing (keyboard navigation), semantic HTML audit, cross-browser verification, light/dark mode testing
       - Current status: All 22 pages pass automated WCAG AA audit
       - Browsers tested: Chrome, Firefox, Safari
       - Contact: How to report accessibility issues (link to contact page)
       - Last verified date

    3. **Integration with site**:
       - Add to footer as a link (per Claude's discretion on placement -- footer is most conventional for accessibility statements)
       - Add to sitemap.xml
       - Ensure nav/footer structure matches canonical pattern from Phase 14
       - Apply active state when on this page

    4. **HTML structure**: Must follow all semantic HTML patterns established in Plan 01. Must pass the accessibility test suite from Plans 01-02.

    5. **Update the test suite** (tests/accessibility.spec.mjs) to include accessibility.html in the page list (now 23 pages total).

    IMPORTANT: Keep the statement factual and professional. No marketing language. Align with the NTSB investigation aesthetic -- this is a technical compliance document.
  </action>
  <verify>
    - accessibility.html exists and matches site design
    - Page renders correctly in light and dark modes
    - Footer link to accessibility.html exists on all pages
    - sitemap.xml includes accessibility.html
    - `npx playwright test tests/accessibility.spec.mjs` passes including the new page
  </verify>
  <done>
    Public accessibility statement page live at /accessibility.html. Footer link added across all pages. Page passes accessibility test suite. sitemap.xml updated. Statement is professional, factual, and aligned with NTSB aesthetic.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 4: Visual verification of all pages in light/dark modes</name>
  <files>
    index.html
    accessibility.html
  </files>
  <action>
    CHECKPOINT: Human visual verification of the complete accessibility QA work across all site pages.

    What was built across Plans 01-03:
    - Semantic HTML overhaul (Plan 01)
    - Automated accessibility test suite (Plan 01)
    - WCAG AA audit and fixes (Plan 02)
    - Cross-browser verification (Plan 02)
    - Screenshot evidence captured (this plan, Task 1)
    - Internal accessibility report (this plan, Task 2)
    - Public accessibility statement page (this plan, Task 3)

    Verification steps for the user:
    1. Start local server: `python3 -m http.server 8080` in project root
    2. Open http://localhost:8080 in browser
    3. Check homepage in light mode -- looks polished, nothing broken
    4. Toggle dark mode -- verify it looks equally polished
    5. Check accessibility.html -- new page matches site design
    6. Spot-check 2-3 exhibit pages in both modes
    7. Check mobile (resize to ~375px or use DevTools) -- nav hamburger works, content readable
    8. Verify footer on any page includes accessibility link

    Per CONTEXT.md: "Light and dark mode are equal priority -- both must look polished."

    Resume signal: Type "approved" or describe issues to fix.
  </action>
  <verify>
    User confirms visual quality by typing "approved" after manual inspection.
  </verify>
  <done>
    User has verified that all pages look polished in both light and dark modes at desktop and mobile viewports. Accessibility statement page matches site design. Footer accessibility link present.
  </done>
</task>

</tasks>

<verification>
1. 88 screenshots exist in .planning/phases/15-comprehensive-accessibility-qa/screenshots/
2. Internal report exists with per-page WCAG checklist
3. accessibility.html renders correctly and passes test suite
4. `npx playwright test` passes all tests including new page
5. Footer link to accessibility page visible on all pages
6. User confirms visual quality in light/dark modes
</verification>

<success_criteria>
- Screenshot evidence captured for all pages in all 4 configurations (light/dark x desktop/mobile)
- Lighthouse or axe-core audit data captured and documented
- Internal accessibility report complete with per-page WCAG criterion checklist
- Public accessibility statement page live and integrated into site
- User confirms visual quality across modes and viewports
</success_criteria>

<output>
After completion, create `.planning/phases/15-comprehensive-accessibility-qa/15-03-SUMMARY.md`
</output>
