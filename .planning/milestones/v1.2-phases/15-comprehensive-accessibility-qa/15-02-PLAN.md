---
phase: 15-comprehensive-accessibility-qa
plan: 02
type: execute
wave: 2
depends_on:
  - 15-01
files_modified:
  - css/main.css
  - index.html
  - philosophy.html
  - faq.html
  - contact.html
  - portfolio.html
  - review.html
  - technologies.html
  - testimonials.html
  - exhibits/exhibit-a.html
  - exhibits/exhibit-b.html
  - exhibits/exhibit-c.html
  - exhibits/exhibit-d.html
  - exhibits/exhibit-e.html
  - exhibits/exhibit-f.html
  - exhibits/exhibit-g.html
  - exhibits/exhibit-h.html
  - exhibits/exhibit-i.html
  - exhibits/exhibit-j.html
  - exhibits/exhibit-k.html
  - exhibits/exhibit-l.html
  - exhibits/exhibit-m.html
  - exhibits/exhibit-n.html
autonomous: true
requirements:
  - A11Y-02
  - A11Y-04

must_haves:
  truths:
    - "axe-core WCAG AA audit reports zero violations across all 22 pages in both light and dark modes"
    - "All text meets WCAG AA contrast ratios (4.5:1 normal, 3:1 large) in both themes"
    - "All interactive elements have visible focus indicators"
    - "Keyboard navigation works through all interactive elements on every page"
    - "Site renders functionally equivalent across Chrome, Firefox, and Safari"
  artifacts:
    - path: "css/main.css"
      provides: "Any contrast or focus indicator fixes"
    - path: "tests/accessibility.spec.mjs"
      provides: "Updated test suite passes after all fixes"
  key_links:
    - from: "css/main.css"
      to: "all HTML pages"
      via: "shared stylesheet link"
      pattern: "link.*main\\.css"
    - from: "tests/accessibility.spec.mjs"
      to: "all 22 HTML pages"
      via: "axe-core WCAG AA validation"
      pattern: "withTags.*wcag"
---

<objective>
Run comprehensive WCAG AA audit across all 22 pages, fix any violations found, and verify cross-browser rendering equivalence.

Purpose: After v1.2 content changes (3 new exhibits, restructured exhibits, new positioning sections, nav/footer overhaul) and Plan 01's semantic HTML overhaul, re-verify that the entire site passes WCAG AA. Also verify cross-browser rendering since the site must look professional across major browsers.

Output: Zero WCAG AA violations on all 22 pages in both modes; cross-browser verification complete.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-comprehensive-accessibility-qa/15-CONTEXT.md
@.planning/phases/15-comprehensive-accessibility-qa/15-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: WCAG AA audit-fix cycle across all 22 pages</name>
  <files>
    css/main.css
    index.html
    philosophy.html
    faq.html
    contact.html
    portfolio.html
    review.html
    technologies.html
    testimonials.html
    exhibits/exhibit-a.html
    exhibits/exhibit-b.html
    exhibits/exhibit-c.html
    exhibits/exhibit-d.html
    exhibits/exhibit-e.html
    exhibits/exhibit-f.html
    exhibits/exhibit-g.html
    exhibits/exhibit-h.html
    exhibits/exhibit-i.html
    exhibits/exhibit-j.html
    exhibits/exhibit-k.html
    exhibits/exhibit-l.html
    exhibits/exhibit-m.html
    exhibits/exhibit-n.html
  </files>
  <action>
    Run the automated accessibility test suite from Plan 01 and systematically fix all violations found.

    **Audit-Fix Cycle:**

    1. **Run initial audit**: `npx playwright test tests/accessibility.spec.mjs` to get baseline violation count.

    2. **Categorize violations** by type (axe-core rule IDs):
       - **Color contrast** (color-contrast): Fix in css/main.css using design tokens. The site already passed 37/37 contrast tests in v1.1, but v1.2 added new content that may introduce issues. Check new exhibits (e, m, n), Three Lenses section, Five Core Influences section.
       - **Missing labels** (label, aria-label-*): Fix in HTML by adding appropriate labels.
       - **Focus indicators** (focus-visible): Ensure all interactive elements (links, buttons, toggle, hamburger) have visible `:focus-visible` outlines. Check against dark backgrounds.
       - **Link purpose** (link-name): Ensure all links have discernible text.
       - **Image alt** (image-alt): Should already be fixed by Plan 01, verify.

    3. **Fix in priority order**: Critical (content unreadable) > Serious (hard to use) > Moderate (inconvenient) > Minor.

    4. **Keyboard navigation verification**: Tab through key flows on representative pages:
       - index.html: Skip link -> nav items -> hero CTA -> content links -> footer links
       - faq.html: Skip link -> nav -> FAQ accordions (Enter/Space to toggle) -> footer
       - testimonials.html: Skip link -> nav -> exhibit links -> footer
       - One exhibit page: Skip link -> nav (with active parent) -> content links -> footer
       - Contact page: Skip link -> nav -> email/social links -> footer
       Verify: Tab order logical, focus visible at each step, no focus traps.

    5. **Re-run audit** after each fix batch. Iterate until zero violations.

    **CSS fixes should use existing design tokens.** Do not create new hardcoded colors. If a new token is needed, name it semantically (e.g., --color-focus-ring) and add to :root and [data-theme="dark"] blocks.

    **Do NOT change the visual design** unless required for WCAG compliance. When a compliance fix changes appearance (e.g., darker text for contrast), choose the closest compliant color that preserves the brand aesthetic.
  </action>
  <verify>
    Run `npx playwright test tests/accessibility.spec.mjs` and confirm:
    - Zero WCAG AA violations on all 22 pages
    - Both light and dark mode tests pass
    - Tab through index.html, faq.html, one exhibit page -- focus visible at every stop
  </verify>
  <done>
    All 22 pages pass axe-core WCAG AA audit in both light and dark modes. All interactive elements have visible focus indicators. Keyboard navigation works correctly through all pages with logical tab order and no focus traps.
  </done>
</task>

<task type="auto">
  <name>Task 2: Cross-browser rendering verification</name>
  <files>
    css/main.css
  </files>
  <action>
    Verify the site renders functionally equivalent across Chrome, Firefox, and Safari (WebKit). Per CONTEXT.md: "Cross-browser rendering bar is 'functionally equivalent' -- content readable, navigation works, looks professional; minor rendering differences between browsers are acceptable."

    **Browser matrix** (Claude's discretion per CONTEXT.md):
    - Chromium (primary -- most users)
    - Firefox (secondary -- important for developer audience)
    - WebKit/Safari (tertiary -- macOS/iOS users)

    **Verification approach using Playwright multi-browser:**

    1. **Update playwright.config.mjs** (if not already configured) to include chromium, firefox, and webkit projects.

    2. **Run the existing accessibility test suite across all three browsers**: `npx playwright test tests/accessibility.spec.mjs --project=chromium --project=firefox --project=webkit`

    3. **Take comparison screenshots** of 4 representative pages across all 3 browsers at 1200px desktop viewport:
       - index.html (hero, cards, complex layout)
       - testimonials.html (grid layout, exhibit cards)
       - faq.html (details/summary, accordion)
       - One exhibit page (report layout, tables)

    4. **Identify any CSS rendering differences** that affect readability or professionalism. Common cross-browser issues:
       - `details/summary` styling differences (Firefox vs Chrome)
       - Custom property fallback behavior
       - Grid/flex layout differences
       - Font rendering differences (expected, acceptable)

    5. **Fix any functional issues** in css/main.css. Focus on:
       - Content readability (text must be legible in all browsers)
       - Navigation functionality (hamburger, links, active states)
       - Layout integrity (no broken grids, no overlapping elements)
       - Dark mode toggle working in all browsers

    Minor rendering differences (font smoothing, subpixel rendering, scroll behavior) are acceptable per CONTEXT.md and should NOT be fixed.
  </action>
  <verify>
    Run accessibility test suite across all three browsers:
    `npx playwright test tests/accessibility.spec.mjs --project=chromium --project=firefox --project=webkit`
    All tests pass in all three browsers.
  </verify>
  <done>
    Site renders functionally equivalent across Chromium, Firefox, and WebKit. Content is readable, navigation works, and the site looks professional in all three browsers. Accessibility test suite passes in all three browsers.
  </done>
</task>

</tasks>

<verification>
1. `npx playwright test tests/accessibility.spec.mjs` -- zero failures across all browsers
2. Keyboard tab test: index.html focus path covers skip link -> nav -> content -> footer
3. No new hardcoded colors in css/main.css (all fixes use design tokens)
4. Visual spot-check: site looks unchanged except for any WCAG-required contrast fixes
</verification>

<success_criteria>
- Zero WCAG AA violations across all 22 pages in both light and dark modes
- All interactive elements keyboard-accessible with visible focus indicators
- Accessibility test suite passes in Chromium, Firefox, and WebKit
- Cross-browser rendering is functionally equivalent (content readable, nav works, looks professional)
</success_criteria>

<output>
After completion, create `.planning/phases/15-comprehensive-accessibility-qa/15-02-SUMMARY.md`
</output>
