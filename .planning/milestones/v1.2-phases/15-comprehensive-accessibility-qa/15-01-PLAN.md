---
phase: 15-comprehensive-accessibility-qa
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - philosophy.html
  - faq.html
  - contact.html
  - portfolio.html
  - review.html
  - technologies.html
  - testimonials.html
  - exhibits/exhibit-a.html
  - exhibits/exhibit-b.html
  - exhibits/exhibit-c.html
  - exhibits/exhibit-d.html
  - exhibits/exhibit-e.html
  - exhibits/exhibit-f.html
  - exhibits/exhibit-g.html
  - exhibits/exhibit-h.html
  - exhibits/exhibit-i.html
  - exhibits/exhibit-j.html
  - exhibits/exhibit-k.html
  - exhibits/exhibit-l.html
  - exhibits/exhibit-m.html
  - exhibits/exhibit-n.html
  - tests/accessibility.spec.mjs
  - playwright.config.mjs
  - package.json
autonomous: true
requirements:
  - A11Y-06
  - A11Y-03

must_haves:
  truths:
    - "All 22 pages use semantic HTML elements (header, nav, main, footer, section, article) appropriately"
    - "No pages have div-soup where semantic elements should be used"
    - "Heading hierarchy is correct on every page (no skipped levels, single h1)"
    - "Automated accessibility test suite runs via npm script and passes on all 22 pages"
    - "ARIA attributes are correct and complete (landmarks, labels, roles)"
  artifacts:
    - path: "tests/accessibility.spec.mjs"
      provides: "Automated accessibility test suite using Playwright + axe-core"
      min_lines: 80
    - path: "playwright.config.mjs"
      provides: "Playwright configuration for accessibility testing"
      min_lines: 10
    - path: "package.json"
      provides: "npm test script for running accessibility suite"
      contains: "test"
  key_links:
    - from: "tests/accessibility.spec.mjs"
      to: "all 22 HTML pages"
      via: "Playwright page navigation to local HTTP server"
      pattern: "page\\.goto.*localhost"
    - from: "tests/accessibility.spec.mjs"
      to: "@axe-core/playwright"
      via: "axe-core accessibility engine integration"
      pattern: "AxeBuilder|axe"
---

<objective>
Audit and fix semantic HTML across all 22 pages, then create a permanent automated accessibility test suite that validates WCAG AA compliance.

Purpose: Semantic HTML is the foundation of accessibility -- screen readers, search engines, and assistive technologies rely on proper element usage. The automated test suite provides ongoing regression prevention and serves as proof of accessibility commitment.

Output: All 22 pages with correct semantic HTML structure; a permanent Playwright + axe-core test suite that can be re-run after any future change.
</objective>

<execution_context>
@/home/xhiris/.claude/get-shit-done/workflows/execute-plan.md
@/home/xhiris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-comprehensive-accessibility-qa/15-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Semantic HTML audit and fix across all 22 pages</name>
  <files>
    index.html
    philosophy.html
    faq.html
    contact.html
    portfolio.html
    review.html
    technologies.html
    testimonials.html
    exhibits/exhibit-a.html
    exhibits/exhibit-b.html
    exhibits/exhibit-c.html
    exhibits/exhibit-d.html
    exhibits/exhibit-e.html
    exhibits/exhibit-f.html
    exhibits/exhibit-g.html
    exhibits/exhibit-h.html
    exhibits/exhibit-i.html
    exhibits/exhibit-j.html
    exhibits/exhibit-k.html
    exhibits/exhibit-l.html
    exhibits/exhibit-m.html
    exhibits/exhibit-n.html
  </files>
  <action>
    Perform a full semantic HTML overhaul across all 22 pages. Per CONTEXT.md: "Full semantic HTML overhaul -- restructure pages to use proper semantic elements wherever appropriate."

    For each page, audit and fix:

    1. **Document structure**: Ensure proper `<header>`, `<nav>`, `<main>`, `<footer>` landmarks. Remove any `<div>` wrappers that should be semantic elements.

    2. **Heading hierarchy**: Verify single `<h1>` per page, no skipped heading levels (h1 -> h2 -> h3, never h1 -> h3). The site already passed TYPO-02 in v1.1, but verify after v1.2 content changes (3 new exhibits, portfolio changes, homepage changes).

    3. **Content sectioning**: Use `<section>` with proper headings for major content areas. Use `<article>` for self-contained content blocks (exhibit case studies). Use `<aside>` for tangential content.

    4. **Interactive elements**: Verify all `<details>/<summary>` elements (FAQ page) have proper structure. Verify all links have descriptive text (not "click here"). Verify all form elements have associated labels (contact page).

    5. **ARIA attributes**: Verify `aria-label` on navigation landmarks (e.g., `<nav aria-label="Main navigation">`). Verify `aria-current="page"` on active nav items (added in Phase 14). Verify skip-to-content link exists and targets `<main>`. Verify dark mode toggle has `aria-pressed` state. Verify hamburger menu has `aria-expanded`.

    6. **Image accessibility**: Verify all `<img>` tags have meaningful `alt` text (not empty unless decorative). Hero image should have descriptive alt. Logo image should have alt="Pattern 158 Solutions" or similar.

    7. **Table accessibility**: Verify all tables have `<thead>`, `<th scope="col">` or `<th scope="row">` for exhibit data tables. Ensure mobile card transforms maintain data association.

    8. **Language and metadata**: Verify `<html lang="en">` on all pages.

    Approach: Read each page, identify issues, fix in batches by issue type (e.g., fix all landmark issues across pages, then all heading issues, etc.) for consistency.

    IMPORTANT: Do NOT change visual appearance. Semantic changes should be invisible to sighted users but transformative for assistive technology users.
  </action>
  <verify>
    For each page type (root pages, exhibit pages), verify:
    - `grep -c '<main' {file}` returns 1
    - `grep -c '<header' {file}` returns at least 1
    - `grep -c '<footer' {file}` returns at least 1
    - `grep -c '<nav' {file}` returns at least 1
    - No h1 followed by h3 without h2 in between (heading skip check)
    - `grep 'lang="en"' {file}` returns match on html element
  </verify>
  <done>
    All 22 pages use semantic HTML5 elements appropriately. Every page has proper landmarks (header, nav, main, footer). Heading hierarchy is correct with no skipped levels. ARIA attributes are complete and correct. Tables have proper scope attributes. All images have meaningful alt text.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create permanent automated accessibility test suite</name>
  <files>
    tests/accessibility.spec.mjs
    playwright.config.mjs
    package.json
  </files>
  <action>
    Create a permanent, re-runnable accessibility test suite using Playwright and @axe-core/playwright. Per CONTEXT.md: "Permanent test suite that lives in the repo and can be re-run after future changes. Dev dependencies are acceptable."

    1. **Install dependencies**: Add `@axe-core/playwright` and `@playwright/test` as devDependencies. Playwright is already installed as a devDependency but `@playwright/test` provides the test runner.

    2. **Create playwright.config.mjs**:
       - Base URL: http://localhost:8080 (use Python http.server or similar)
       - Projects: chromium (primary), optionally firefox and webkit for cross-browser (Phase 15-03 will use these)
       - Timeout: 30 seconds per test
       - Reporter: list (console) + html (for reports)
       - Web server config: start a local HTTP server serving the project root

    3. **Create tests/accessibility.spec.mjs**:
       - Import AxeBuilder from @axe-core/playwright
       - Define page list: all 22 HTML pages with their paths
       - For each page, create test that:
         a. Navigates to the page
         b. Runs axe-core with WCAG 2.1 AA ruleset (`withTags(['wcag2a', 'wcag2aa', 'wcag21a', 'wcag21aa'])`)
         c. Asserts zero violations
         d. Tests in light mode (default)
       - Add a second test loop for dark mode:
         a. Navigate to page
         b. Set dark mode (click toggle or set localStorage)
         c. Run axe-core
         d. Assert zero violations
       - Add semantic structure tests:
         a. Verify each page has exactly one `<main>` landmark
         b. Verify each page has a skip-to-content link
         c. Verify heading hierarchy (no skipped levels)
         d. Verify all images have alt attributes

    4. **Update package.json**:
       - Add `"test"` script: `"npx playwright test"`
       - Add `"test:a11y"` script: `"npx playwright test tests/accessibility.spec.mjs"`
       - Keep existing audit scripts intact

    The test suite should be designed so it runs against a local HTTP server and tests real rendered pages (not static HTML parsing). This catches CSS-dependent accessibility issues (like color contrast from computed styles).

    IMPORTANT: The test suite MUST pass after Task 1's semantic HTML fixes. If any tests fail, fix the underlying HTML issues (not the tests) until the suite is green.
  </action>
  <verify>
    Run `npm test` (or `npx playwright test tests/accessibility.spec.mjs`) and confirm:
    - All tests pass (zero failures)
    - Both light and dark mode tests pass
    - Output shows all 22 pages tested
    - axe-core reports zero WCAG AA violations
  </verify>
  <done>
    Permanent automated accessibility test suite exists at tests/accessibility.spec.mjs. Suite tests all 22 pages in both light and dark modes for WCAG AA compliance using axe-core. Suite passes with zero violations. npm scripts configured for easy re-running.
  </done>
</task>

</tasks>

<verification>
1. Run `npx playwright test tests/accessibility.spec.mjs` -- all tests pass
2. Verify semantic elements: `grep -l '<main' *.html exhibits/*.html` returns all 22 files
3. Verify ARIA landmarks: `grep -l 'aria-label' *.html exhibits/*.html` returns all 22 files
4. Verify heading hierarchy: no h1->h3 skips in any file
5. Verify test suite is permanent: tests/accessibility.spec.mjs and playwright.config.mjs committed to repo
</verification>

<success_criteria>
- All 22 pages have correct semantic HTML structure (landmarks, headings, ARIA)
- Automated test suite passes all WCAG AA checks on all 22 pages in both light and dark modes
- Test suite is permanent and re-runnable via `npm test`
- Zero visual changes to the site (semantic-only restructuring)
</success_criteria>

<output>
After completion, create `.planning/phases/15-comprehensive-accessibility-qa/15-01-SUMMARY.md`
</output>
